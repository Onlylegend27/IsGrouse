<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grouse</title>

    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="images/320grouse.png" type="image/png">

    <link href="https://fonts.googleapis.com/css2?family=Courier+New&family=Bebas+Neue&family=Audiowide&family=Press+Start+2P&display=swap" rel="stylesheet">

    <!-- OVERLAY VIDEO STYLES -->
    <style>
        #audio-overlay {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 1500;
        }

        #audio-overlay video {
            width: 100%;
            height: 100%;
            object-fit: cover; /* FIT FULL SCREEN */
            display: none; /* HIDDEN UNTIL PLAY */
        }
    </style>
</head>

<body>

<audio id="grouse-audio">
    <source src="videos/CallOfTheGrouse.mp3" type="audio/mp3">
</audio>

<div class="video-background">
    <video id="bg-video" autoplay loop muted playsinline>
        <source src="videos/guassian.mov" type="video/mp4">
    </video>
</div>

<!-- AUDIO OVERLAY (FULLSCREEN, INSTANT DISAPPEAR) -->
<div id="audio-overlay">
    <video id="grouse-overlay-video" playsinline muted>
        <source src="videos/VideoOverlay.webm" type="video/webm">
    </video>
</div>

<header>
    <div class="header-inner">
        <h1 id="header-title">Grouse</h1>
        <nav>
            <ul>
                <li><a href="#home">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#masterpieces">Masterpieces</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>
    </div>
</header>

<section id="home">
    <h2>GREATEST EDITOR</h2>
    <p>The World Is Yours.</p>
</section>

<section id="about">
    <h2>About</h2>
    <p>Grouse is a bird.</p>
</section>

<section id="masterpieces">
    <h2>My Masterpieces</h2>
    <div class="video-stack">
        <video controls src="videos/blalenciaga.mov"></video>
        <video controls src="videos/EveryMinuteOfEveryDay.mov"></video>
        <video controls src="videos/DiorCoglone.mov"></video>
        <video controls src="videos/verly last time.mov"></video>
        <video controls src="videos/p2.mov"></video>
        <video controls src="videos/idkwhatimdoinganymore.mov"></video>
    </div>
</section>

<section id="contact">
    <h2>Contact</h2>
    <p>Email: isgrouse@gmail.com</p>
    <p>TikTok: @isgrouse</p>
    <p>Instagram: @isgrouse</p>
</section>

<footer>
    <p>&copy; 2025 Grouse</p>
</footer>

<script>
/* HEADER FONT CYCLE */
const fonts = ['Bebas Neue', 'Audiowide', 'Press Start 2P', 'Courier New'];
let fontIndex = 0;
const title = document.getElementById('header-title');

setInterval(() => {
    title.style.opacity = 0;
    setTimeout(() => {
        title.style.fontFamily = fonts[fontIndex];
        fontIndex = (fontIndex + 1) % fonts.length;
        title.style.opacity = 1;
    }, 120);
}, 300);

/* AUDIO + OVERLAY VIDEO */
const audio = document.getElementById('grouse-audio');
const overlay = document.getElementById('audio-overlay');
const overlayVideo = document.getElementById('grouse-overlay-video');

audio.volume = 0.25;

document.addEventListener('click', () => {
    audio.play().catch(() => {});
}, { once: true });

audio.addEventListener('play', () => {
    overlayVideo.currentTime = 0;
    overlayVideo.style.display = 'block';
    overlayVideo.play().catch(() => {});
});

overlayVideo.addEventListener('ended', () => {
    overlayVideo.style.display = 'none'; // INSTANTLY DISAPPEAR
});

/* BOUNDED PARALLAX */
const bgVideo = document.getElementById('bg-video');
const bottomMargin = 40;

function updateParallax() {
    const scrollTop = window.scrollY;
    const docHeight = document.documentElement.scrollHeight;
    const winHeight = window.innerHeight;

    const maxScroll = docHeight - winHeight;
    const scrollProgress = Math.min(scrollTop / maxScroll, 1);

    const videoHeight = bgVideo.offsetHeight;
    const maxVideoScroll = Math.max(videoHeight - winHeight - bottomMargin, 0);

    const videoOffset = scrollProgress * maxVideoScroll;

    bgVideo.style.transform =
        `translate(-50%, calc(-50% + ${videoOffset}px))`;
}

window.addEventListener('scroll', updateParallax);
window.addEventListener('resize', updateParallax);
window.addEventListener('load', updateParallax);
</script>

</body>
</html>
